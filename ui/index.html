<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quest GPT - AI Powered Automation Installer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Welcome Modal -->
  <div class="modal" id="welcome-modal" onclick="event.stopPropagation()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <img src="../assets/logo.png" alt="Quest GPT Logo" class="welcome-logo" onerror="console.error('Welcome logo failed'); this.style.display='none';">
      <div class="logo-ascii">
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—<br>
        â•‘   QUEST GPT                   â•‘<br>
        â•‘   AI Powered Installer        â•‘<br>
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      </div>
      <h2>Welcome to Quest GPT</h2>
      <p>Your sassy AI-powered automation installer. Here's how it works:</p>
      <ol style="line-height: 2; margin: 2rem 0;">
        <li><strong>Tell me what you need</strong> - Type anything like "pandas" or "web dev stack"</li>
        <li><strong>Pick your poison</strong> - Select what you actually want to install</li>
        <li><strong>Learn while I work</strong> - Answer MCQs and learn what you're installing</li>
      </ol>
      <p style="font-size: 0.9rem; color: var(--text-secondary);">No boring terminal output. Just knowledge and working software.</p>
      <button class="btn btn-primary" onclick="closeWelcome()">Let's Go</button>
    </div>
  </div>

  <div class="app-container">
    <!-- Header with Logo -->
    <header class="header">
      <div class="logo-section">
        <img src="../assets/logo.png" alt="Quest GPT" class="header-logo" onerror="console.error('Logo failed to load'); this.style.display='none';">
        <div>
          <h1 class="app-title">Quest GPT</h1>
          <span style="font-size: 0.85rem; opacity: 0.7;">AI Powered Automation Installer</span>
        </div>
      </div>
      <div class="system-info" id="system-info">
        <span class="loading">Detecting system...</span>
      </div>
    </header>

    <!-- Progress Indicator -->
    <div class="progress-indicator">
      <div class="progress-step active" data-step="1">
        <div class="step-number">01</div>
        <div class="step-label">Search</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="2">
        <div class="step-number">02</div>
        <div class="step-label">Select</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="3">
        <div class="step-number">03</div>
        <div class="step-label">Install & Learn</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="4">
        <div class="step-number">04</div>
        <div class="step-label">Done</div>
      </div>
    </div>

    <!-- Main Content - Scrolling Form -->
    <main class="main-content">
      <!-- Section 1: Search -->
      <section class="step-section" id="step-1">
        <h2 class="step-title">01. What do you need?</h2>
        <p style="margin-bottom: 2rem; color: var(--text-secondary);">Tell me what software or stack you want. I'll figure out the rest.</p>
        <div class="search-box">
          <input 
            type="text" 
            id="search-input" 
            placeholder="e.g., pandas, docker, full stack..." 
            class="search-input"
          >
          <button id="search-btn" class="btn btn-primary">Analyze</button>
        </div>
      </section>

      <!-- Section 2: Selection -->
      <section class="step-section hidden" id="step-2">
        <h2 class="step-title">02. Pick what you want</h2>
        <p style="margin-bottom: 2rem; color: var(--text-secondary);">Click to select dependencies. Selected items will be highlighted.</p>
        
        <!-- Mode Toggle (Minimal vs Full) -->
        <div class="mode-toggle-bar" id="mode-toggle-bar" style="display: none;">
          <span class="mode-label">Mode:</span>
          <button class="mode-btn active" id="mode-essential">Essential Only</button>
          <button class="mode-btn" id="mode-full">Full Stack</button>
        </div>

        <!-- Conflict Warnings -->
        <div id="conflict-warnings" class="conflict-warnings" style="display: none;"></div>

        <!-- Stack Options (shown when multiple stack choices available) -->
        <div id="stack-options-container" class="stack-options-container hidden">
          <h3 style="margin-bottom: 1rem; font-size: 1.1rem;">Choose Your Stack:</h3>
          <div id="stack-options-grid" class="stack-options-grid"></div>
          <div style="margin: 2rem 0; padding: 1rem; background: var(--bg-card); border-left: 3px solid var(--primary);">
            <p style="font-size: 0.9rem; color: var(--text-secondary);">Or select individual packages below â†“</p>
          </div>
        </div>
        
        <div id="dependencies-grid" class="dependencies-grid"></div>
        <div class="action-bar">
          <button id="back-btn" class="btn btn-secondary">â† Back</button>
          <button id="uninstall-selected-btn" class="btn btn-secondary" style="background: #c00; border-color: #c00; color: #fff; display: none;">
            Uninstall Selected
          </button>
          <button id="install-btn" class="btn btn-primary" disabled>Select Something</button>
        </div>
      </section>

      <!-- Section 3: Install & Learn -->
      <section class="step-section hidden" id="step-3">
        <h2 class="step-title">03. Installing & Learning</h2>
        
        <!-- Sassy Intro Box -->
        <div class="sassy-intro-box">
          <h3>Sit back, relax, and test your knowledge ğŸ˜</h3>
          <p>We're handling everything - terminal commands, sudo passwords, PATH setup, error fixing. You just answer questions and look smart.</p>
          <p style="font-size: 0.85rem; opacity: 0.8; margin-top: 0.5rem;">No manual config. No googling errors. We got this.</p>
        </div>
        
        <div class="split-view">
          <!-- Left Side: Terminal -->
          <div class="terminal-section">
            <div class="terminal-header">
              <span>â— â— â—</span>
              <span>Terminal Output</span>
            </div>
            <div class="terminal-body" id="terminal-output">
              <div class="terminal-line">Quest GPT Installer v1.0</div>
              <div class="terminal-line">Ready to install...</div>
            </div>
            <div class="terminal-input-area" id="terminal-input-area" style="display: none;">
              <span class="terminal-prompt">$</span>
              <input type="password" id="terminal-input" class="terminal-input" placeholder="Enter sudo password...">
              <button id="terminal-submit" class="terminal-submit-btn">Submit</button>
            </div>
          </div>
          
          <!-- Right Side: Questions + Chatbot -->
          <div class="questions-section">
            <div id="mcq-section" class="mcq-content">
              <p>Generating questions...</p>
            </div>
            <div id="progress-section" class="progress-text"></div>

            <!-- Chatbot Placeholder -->
            <div class="chatbot-placeholder" id="chatbot-section">
              <div class="chatbot-header">
                <span>ğŸ’¬</span>
                <span>Ask Quest GPT</span>
                <span class="chatbot-badge">Coming Soon</span>
              </div>
              <div class="chatbot-body">
                <div class="chatbot-message bot">
                  <span class="chatbot-avatar">ğŸ¤–</span>
                  <p>Hey! I can answer questions about what's being installed. Ask me anything â€” "What does this package do?", "Why do I need sudo?", etc.</p>
                </div>
              </div>
              <div class="chatbot-input-area">
                <input type="text" class="chatbot-input" placeholder="Ask about your installation..." disabled>
                <button class="chatbot-send-btn" disabled>â†’</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: Done -->
      <section class="step-section hidden" id="step-4">
        <h2 class="step-title">âœ“ Done!</h2>
        <div id="verification-results" class="verification-results"></div>
        <div class="action-bar">
          <button id="new-search-btn" class="btn btn-primary">Install More Stuff</button>
          <button id="uninstall-btn" class="btn btn-secondary" onclick="showUninstallPlaceholder()">Uninstall Packages</button>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>Quest GPT â€¢ Built with AI, sass, and minimal design â€¢ Cross-Platform Edition</p>
    </footer>

    <!-- Installation Complete Modal -->
    <div class="modal" id="complete-modal" style="display: none;">
      <div class="modal-content" onclick="event.stopPropagation()">
        <h2>âœ… Installation Complete</h2>
        <p>Your installs finished successfully. Want me to verify everything now?</p>
        <div class="safety-actions">
          <button class="btn btn-secondary" onclick="this.closest('.modal').style.display='none'">Close</button>
          <button class="btn btn-primary" onclick="proceedToVerification()">Continue</button>
        </div>
      </div>
    </div>

    <!-- Safety Preview Modal -->
    <div class="modal" id="safety-modal" style="display: none;">
      <div class="modal-content safety-modal-content">
        <h2>ğŸ” Command Safety Preview</h2>
        <p>Review the commands that will run on your system before proceeding.</p>
        <div id="safety-summary" class="safety-summary"></div>
        <div id="safety-commands-list" class="safety-commands-list"></div>
        <div class="safety-actions">
          <button class="btn btn-secondary" onclick="cancelSafetyPreview()">â† Cancel</button>
          <button class="btn btn-primary" id="safety-proceed-btn" onclick="proceedWithInstall()">Proceed with Install</button>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
